<div *ngIf="todo" appBolder>

  <div class="todo-table">
    <mat-table #table [dataSource]="dataSource">

      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
        <mat-cell *matCellDef="let todo"> <button mat-button color="secondary" routerLink="/detail/{{todo.id}}"> {{todo.name}}</button>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="completed">
        <mat-header-cell *matHeaderCellDef> Completed </mat-header-cell>
        <mat-cell *matCellDef="let todo">
          <button mat-icon-button (click)="changeCompleted(todo)">
            <div *ngIf="todo.completed">
              <i class="material-icons">done</i>
            </div></button> </mat-cell>
      </ng-container>

      <ng-container matColumnDef="votes">
        <mat-header-cell *matHeaderCellDef> # Votes </mat-header-cell>
        <mat-cell *matCellDef="let todo"> {{todo.votes}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="createdAt">
        <mat-header-cell *matHeaderCellDef> Created </mat-header-cell>
        <mat-cell *matCellDef="let todo">  {{ todo.created_at | date:"dd/MM/yyyy" }} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let todo">
          <button mat-icon-button title="Upvote"
          (click)="upVote(todo)"><i class="material-icons">thumb_up</i></button>
          <button mat-icon-button title="Downvote"
          (click)="downVote(todo)"><i class="material-icons">thumb_down</i></button>
          <button mat-icon-button title="Delete todo"
          (click)="delete(todo)"> <i class="material-icons">close</i> </button> </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
</div>
<button mat-button (click)="goBack()">Go back</button>
